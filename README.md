# Файлы формата KBKI

## структура формата файла:

### блок мета-данных

содержит информацию о изображении

#### version

Размерность: **1 байт**

Описание: версия формата

нумерация начинается с 00000000
с каждой новой версией добавляется 1,
в настоящее время актуальна версия **00000000**

#### height
Размерность: **4 байта**

Описание: количество строк пикселей в изображении

#### wigth

Размерность: **4 байта**

Описание: количество столбцов пикселей в изображении

#### filter

Размерность: **1 байт**

Описание: фильтр для изображения

#### color type

Размерность: **1 байт**

Описание: тип цветопередачи

##### Маски:

*наличие альфа канала* 0000000x, где:
1. 1 - при наличии alpha канала
2. 0 - при отсутствии

*цветовая модель* 000yyyy0, где:

1. 0000 - RGB
2. 0001 - CMY
3. 0010 - CMYK
4. 0011 - HSB
5. 0100 - Lab
6. 0101 - HSV
7. 0110 - HLS

#### compression type

Размерность: **1 байт**

Описание: сжатие изображение 

00000000 - **отсутствие** сжатия

далее сжатие делится на:

1. 1xxxxxxx - сжатие без потерь
2. 0xxxxxxx - сжатие с потерями

где xxxxxxx - код сжатия

коды сжатия без потерь:

1. 1000001 - LZ77
2. 1000010 - Deflate

коды сжатия с потерями:

1. 00000001 - JPEG-LS
2. 00000010 - Фрактальный метод

#### type of encryption

Размерность: **1 байт**

Описание: шифрование изображения

00000000 - **отсутствие** шифрования

далее шифрование делится на:

1. 1xxxxxxx - симетричное шифрование
2. 0xxxxxxx - асиметричное шифрование

при присутствии шифрования после его кода записывается размер ключа, 
под него выделяется **1 байт**

**ЕСЛИ ПРИСУТСТВУЕТ ШИФРОВАНИЕ, ТО ОБЯЗАТЕЛЬНО ДОЛЖЕН ВЫДЕЛЯТЬСЯ БАЙТ ПОД РАЗМЕР КЛЮЧА, ДАЖЕ ПРИ ЕГО ОТСУТСТВИИ**

после размера идёт сам ключ, для него выделяется ***размер ключа* байт**

### блок данных

содержит построчно само изображение

Каждая строка имеет 2 параметра:

#### filter

Размерность: **1 байт**

Описание: фильтр применяемый к строке пикселей 

#### content

Размерность: **значение width * количество байт для кодирования пикселя байт**

Описание: пиксели поочерёдно

## Катологи проекта

1. printer - скпипт python для вывода несжатых изображений